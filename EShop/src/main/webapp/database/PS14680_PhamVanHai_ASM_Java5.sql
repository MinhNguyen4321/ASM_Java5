USE master
GO

DROP DATABASE ASM_JAVA5
GO

CREATE DATABASE ASM_JAVA5
GO

USE ASM_JAVA5
GO

-- 1. bang loai hang
CREATE TABLE [CATEGORIES](
	[ID] INT IDENTITY(1,1) PRIMARY KEY,
	[NAME] NVARCHAR(50) NOT NULL
)
GO

-- 2. bang tai khoan
CREATE TABLE [ACCOUNTS](
	[ID] INT IDENTITY(1,1) PRIMARY KEY,
	[USERNAME] VARCHAR(50) NOT NULL,
	[PASSWORD] VARCHAR(50) NOT NULL,
	[FULLNAME] NVARCHAR(50) NOT NULL,
	[EMAIL] VARCHAR(50) NULL,
	[PHOTO] VARCHAR(50) NULL,
	[ACTIVATED] BIT NOT NULL,
	[ADMIN] BIT NOT NULL
)
GO

-- 3. bang hang hoa
CREATE TABLE [PRODUCTS](
	[ID] INT IDENTITY(1,1) PRIMARY KEY,
	[NAME] NVARCHAR(50) NOT NULL,
	[IMAGE] VARCHAR(50) NULL,
	[PRICE] FLOAT NOT NULL,
	[CREATEDATE] DATE NOT NULL,
	[AVAILABLE] BIT, 
	[CATEGORYID] INT REFERENCES [CATEGORIES]([ID])
)
GO

-- 4. bang don hang
CREATE TABLE [ORDERS](
	[ID] INT IDENTITY(1,1) PRIMARY KEY,
	[USERID] INT REFERENCES [ACCOUNTS]([ID]),
	[CREATEDATE] DATETIME NOT NULL,
	[ADDRESS] NVARCHAR(100) NOT NULL
)
GO

-- 5. bang chi tiet don hang
CREATE TABLE [ORDERDETAILS](
	[ID] INT IDENTITY(1,1) PRIMARY KEY,
	[ORDERID] INT REFERENCES [ORDERS]([ID]),
	[PRODUCTID] INT REFERENCES [PRODUCTS]([ID]),
	[PRICE] FLOAT,
	[QUANTITY] INT NOT NULL
)
GO

DELETE FROM [ACCOUNTS]
INSERT INTO [ACCOUNTS] VALUES
('adminhai', '123456', N'Phạm Văn Hải', 'haipvps14680@fpt.edu.vn', 'hai2651.jpg', 1, 1),
('user1', '123456', N'Nguyễn Văn A', 'user1@gmail.com', 'user1.jpg', 1, 0),
('user2', '123456', N'Trần Văn B', 'user2@gmail.com', 'user2.jpg', 1, 0),
('user3', '123456', N'Lê Thị C', 'user3@gmail.com', 'user3.jpg', 1, 0),
('user4', '123456', N'Hồ Văn D', 'user4@gmail.com', 'user4.jpg', 1, 0)
GO

DELETE FROM [CATEGORIES]
INSERT INTO [CATEGORIES] VALUES
(N'IPHONE'),
(N'SAMSUNG'),
(N'XIAOMI'),
(N'APPO'),
(N'REALME')
GO

DELETE FROM [PRODUCTS]
INSERT INTO [PRODUCTS] VALUES 
(N'IPHONE 12 PRO MAX', 'iphone12promax.jpg', 40000000, GETDATE(), 1, 1),
(N'SAMSUNG GALAXY Z FOLD2 5G', 'ssgzfold25g.jpg', 50000000, GETDATE(), 1, 2),
(N'XIAOMI MI 11 5G 128GB', 'xmmi115g.jpg',14200000, GETDATE(), 1, 3),
(N'APPO RENO5 5G', 'apreno55g.jpg', 9990000, GETDATE(), 1, 4),
(N'REALME 8 5G', 'rm85g.jpg', 6890000, GETDATE(), 1, 5)
GO

DELETE FROM [ORDERS]
INSERT INTO [ORDERS] VALUES 
(2, GETDATE(), N'13 Lái Thiêu, TP Thuận An, T Bình Dương'),
(3, GETDATE(), N'123 Tô Ký, Q12, TP HCM'),
(4, GETDATE(), N'12 Tô Ký, Q12, TP HCM'),
(5, GETDATE(), N'1 Tô Ký, Q12, TP HCM')
GO


DELETE FROM [ORDERDETAILS]
INSERT INTO [ORDERDETAILS] VALUES 
(1,1,40000000,1),
(1,2,50000000,1),
(2,1,40000000,1),
(2,3,14200000,1),
(3,1,40000000,1),
(3,4,9990000,1),
(4,1,40000000,2),
(4,5,6890000,1)
GO

